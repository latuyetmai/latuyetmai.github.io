---
title: 'Lab 1: Are people who believe that science is important for making government decisions about COVID-19 more likely to disapprove of the way their Governor is handling the pandemic?'
author: "Catherine Tsai, Mai La"
output:
  pdf_document: default
  html_document:
    df_print: paged
---

```{r load packages, echo=FALSE, warning=FALSE, message=FALSE}
library(dplyr)
library(ggplot2)
library(tidyverse)
library(haven)
```

```{r, include=FALSE}
# r setting
theme_set(theme_light())

knitr::opts_chunk$set(tidy.opts=list(width.cutoff=60), tidy = TRUE)
```

```{r, echo=FALSE, warning=TRUE, message=FALSE}
election <- read_dta("anes_timeseries_2020_stata_20210324.dta")
```

## Importance and Context

Life shapes politics. COVID-19 is the headline event of the 21st century that shaped 2020 and it's effects will be felt for years to come. Although there is not a definitive "best" set of COVID-19 policies (complex and often un-quantifiable trade offs are required for these decisions), the Center for Disease Control (CDC) released Science based recommendations on how to prevent COVID spread. Recommendations such as wearing face masks, social distancing, avoiding large gatherings, and quarantining for the duration of the pandemic.

In 2020, the Federal Government left the handling of COVID-19 largely to states to determine which policies to apply. COVID-19 policies were incredibly different by state. Example: Iowa and Florida had the fewest restrictions while California and New York were among the states with the largest number of [restrictions](https://wallethub.com/edu/states-coronavirus-restrictions/73818). States adopted the CDC's science based policies with varying degrees of adherence. 

Given the amount of State control in determining COVID-19 policy and the importance of Science based recommendations, the question we will investigate in this study specifically seeks to understand Governor performance approval or disapproval for people that believe in science backed handling of COVID-19.

## Description of Data

In order to answer the question, we will use data from the 2020 American National Election Studies (ANES). First to understand the population of interest, we segment the data to only include responses where science is "very important" or "extremely important" for decisions about COVID-19. The survey data in the following chart provided 5 choices with "moderately important" as the third choice on the Likert scale. "Moderately important" could also be interpreted or re-written as "moderately unimportant" inter-changeably and considered a neutral response. Because we want to study the effect of those that feel more strongly science is important, being more selective the responses to include only the stronger choices our study will have better assurances of the respondents commitment to their sentiment about Science in relation to the handling of COVID-19.

```{r, echo = FALSE}
## Define People believe in science
# V202310   How important should science be for decisions about COVID-19
election <- election %>%
  mutate(
    science = case_when(
      election$V202310 == 1 ~ 'Not important',
      election$V202310 == 2 ~ 'Little important',
      election$V202310 == 3 ~ 'Moderately important',
      election$V202310 == 4 ~ 'Very important',
      election$V202310 == 5 ~ 'Extremely important',
      election$V202310 <= -5 ~ 'Others')
  )

election$science <- factor(election$science, levels = c("Not important", 
                                                        "Little important", 
                                                        "Moderately important",
                                                        "Very important", 
                                                        "Extremely important"))

# Define Approve - Disapprove
# V201145  PRE: APPROVE OR DISAPPROVE Râ€™S GOVERNOR HANDLING COVID-19
election <- election %>%
  mutate(
    approve = case_when(
      election$V201145  == 1 ~ 'Approve',
      election$V201145  == 2 ~ 'Disapprove',
      election$V201145 != 1 & election$V201145 != 2 ~ 'Others')
  )
```

```{r echo=FALSE, fig.align='center', fig.height=4, fig.width=6}
science_bar <- election %>% 
  filter(science != "Others") %>% 
  ggplot() + 
  aes(x = science) + 
  geom_bar(fill = "red", alpha = 0.7) + 
  labs(
    title    = 'Distribution of the Importance of Science in Handling COVID-19',
    subtitle = 'Most people feel science is important', 
    x        = 'How important is Science in Handling of COVID-19',
    y        = 'Count of Observations'
  ) + 
  theme_minimal()

science_bar
```

To understand our population's approval or disapproval of the Governor's handling of COVID-19, we included only "approve" and "disapprove" responses. We did not find that adding the addition of "strongly" or "not strongly" data added value to our study as strength of sentiment is not concretely quantifiable with much more variation between respondents. To focus on our question, we proceed with only the binary determination of approval vs. disapproval.

```{r echo=FALSE}
# Subset data: only include people who think science is important
# Only include if they approve or disapprove how the Governor handling COVID-19 
science_approve <- election %>%   
  mutate(
    # Convert approve & Disapprove to binomial scale for testing
    approve_disapprove = case_when(
      election$V201145  == 1 ~ 0,
      election$V201145  == 2 ~ 1)
  ) %>%
  filter(science != "Others" & !is.na(science) &
           approve != "Others" & !is.na(approve))
```

After filtering for only "very" and "extremely" important Science responses, we have 7,345 observations in our study. 62% of respondents approve of their Governor's COVID 19 response.

```{r echo=FALSE, warning=FALSE}
# Sample size
table1 <- science_approve %>%
  group_by(approve) %>%
  summarize(count = n()) %>%
  mutate(percent = round(count*100/sum(count),2))

sum_row = data.frame(approve = "Total", count = sum(table1$count), 
                     percent = 100)
table1 <- rbind(table1, sum_row)

colnames(table1) <- c("Approve/ Disapprove", "Number of Samples", "% of Samples")
knitr::kable(table1, caption = "Sample size of people belive science is important and if they approve or dissaprove of Gorvernor in handling COVID-19",
             align = "c")

```

Our study endeavors to understand the likelihood of Governor disapproval among those that believe that science is important to guide COVID-19 decisions. The study does not address the variation of how different states applied science based policies and the respondent's state of residence. The results of the test somewhat a function of the personal sentiment versus the state's individual COVID policies which are not represented in this study. The results of the test are much more general and do not reach the level of state's COVID policies.

Additionally, the results of the test should not be interpreted to mean that the disapproval of the Governor's handling of the pandemic is solely due to Governor's use (or lack of use) of Science based guidance. There are other external factors that may have played into the respondent's rating of approval and disapproval outside of the scope of the variables selected in our study.


## Most appropriate test 

As discussed above, we are studying one population
* People that believe that science is important for decisions about COVID-19
  
and our outcome of interest is binary
* Approve or Disapprove of Governor's handling of COVID-19
  
Based on our parameters, we will conduct a two-tailed binomial test. In our data, we set approve to 0 (failure) and disapprove to 1 (success). Our hypothesis will set the probability of success at 0.50. We will use a two tailed test in order to understand any differences in approval or disapproval within the group. We do not want to ignore any effect that would be statistically notable in one direction (in favor of another). 

**Hypothesis:**

**Null Hypothesis**: For people believe that science is important in making decisions about COVID-19, the probability that they disapprove of their Governor's handling of the pandemic **is equal** to 0.5. 
$$H_o : P(Disapprove) = 0.5$$

**Alternative Hypothesis**: For people believe that science is important in making decisions about COVID-19, the probability that they disapprove of their Governor's handling of the pandemic **is not equal** to 0.5.
$$H_a : P(Disapprove) \neq 0.5$$

**Assumptions:**

* Binomial variables:
  - We convert approve/disapprove responses to a binary scale (0 and 1)
  
* Independent and Identically Distributed (IID)
  - According to the survey methodology documentation, the sample is based on a random draw from US across 50 states with equal probability
    - This sampling methodology is important to get a diverse and random cross section of the population. If the sample was not drawn from across states and centered in one state the results would be biased towards a specific Governor and state policy
  - The target population is a cross section of 231 million US citizens age 18 or order
  - ANES respondents sampled from respondents of a previous ANES 2016 study 
    - Using the same pool of respondents from a previous study - any bias existing in that group will carry forward into this study

**Rejection Criteria:**

$$p-value < 0.05$$

Using a two tailed binomial test with p-value of 0.05, we proceed to conduct the test.

## Test, results and interpretation

```{r echo=TRUE}
binom.test(x = sum(science_approve$approve_disapprove), 
  n = length(science_approve$approve_disapprove), p = 0.5)
```

The results show that there is statistically very highly significant with p-value at 2.2e-16 much smaller than 0.05 and we could reject the null hypothesis. Or the probability of people disapproving of their Governor's handling of the pandemic **is not** at 0.5 among who believe science is important in making decisions about COVID-19.

Based upon the data, the probability of success is 0.375, or people do not tend to disapprove their Governor's handling of the pandemic. Although statistically significant and the data is in favor of people more likely to approve than disapprove, the fact that 1/3 of respondents did not approve is a significant portion of the respondents and should not be ignored.

The test does not give us any applicable insight if Science was the driving factor for their approval or disapproval, nor how much Scientific guidance was applied by their Governor in making pandemic decisions. There are many factors that play into approving of the Governor (ex. financial considerations and political considerations). The test result does not provide any insight into understanding the approval ratings beyond the fact the sample only included those that indicated Science is important in handling of COVID-19.
